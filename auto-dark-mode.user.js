// ==UserScript==
// @name         Auto Dark Mode
// @version      0.2.0
// @description  Darken Any Website
// @namespace    http://erichsia7.github.io/
// @run-at       document-idle
// @author       erichsia7
// @inject-into  content
// @updateURL    https://erichsia7.github.io/auto-dark-mode/auto-dark-mode.user.js
// @downloadURL  https://erichsia7.github.io/auto-dark-mode/auto-dark-mode.user.js
// @match        *://*/*
// @noframes     
// @exclude      *://*.google.com/*
// @exclude      *://*.youtube.com/*
// @exclude      *://github.*/*
// @exclude      *://twitter.*/*
// @exclude      *://x.*/*
// ==/UserScript==
var autodarkmode;(()=>{"use strict";var e={d:(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)},r={};e.d(r,{default:()=>m});var t={aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],transparent:[255,255,255,0],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(e,r){return["color","background-color","border-color","border-top-color","border-right-color","border-bottom-color","border-left-color","outline-color","caret-color","column-rule-color","text-decoration-color","text-emphasis-color","border-block-color","border-block-end-color","border-block-start-color","border-inline-color","border-inline-end-color","border-inline-start-color","background-image","background-blend-mode","mix-blend-mode","fill","flood-color","lighting-color","stop-color","stroke","accent-color","color-scheme","scrollbar-color","font-palette","print-color-adjust","-webkit-tap-highlight-color","-webkit-border-before-color","-webkit-text-fill-color","-webkit-text-stroke-color","background","outline","box-decoration-break","column-rule"].indexOf(e)>-1||e.startsWith("--")&&function(e){return e=e.trim().toLowerCase(),!!/^#([a-f0-9]{3,4}|[a-f0-9]{6}|[a-f0-9]{8})$/.test(e)||!(!/^(rgb|rgba|hsl|hsla|linear-gradient|radial-gradient|conic-gradient)\(/.test(e)||/var\(--.*\)/.test(e)||/calc\(.*\)/.test(e)||/clamp\(.*\)/.test(e))||!!t.hasOwnProperty(e.toLowerCase())}(r)?(console.log("isColorRelatedProperty",e,r,!0),!0):(console.log("isColorRelatedProperty",e,r,!1),!1)}function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=a.call(t)).done)&&(l.push(n.value),l.length!==r);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,r)||a(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){if(e){if("string"==typeof e)return i(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function l(e){function r(e){var r,t=/(\d+(cm|mm|in|px|pt|pc|rem|ex|ch|em|vw|vh|vmin|vmax|%))$/,n=[],o=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=a(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==t.return||t.return()}finally{if(c)throw i}}}}(e);try{for(o.s();!(r=o.n()).done;){var i=r.value.trim(),c=i.match(t);if(c){var s=l(i.replace(t,"").trim()),u=c[0].trim();n.push({type:"stop",color:s,position:u})}}}catch(e){o.e(e)}finally{o.f()}return n}var n={type:"rgba",rgba:[255,255,255,0]};if(e.startsWith("var("))return{type:"variable",ref:e};if(e.startsWith("rgb")){var o=e.match(/rgba?\((\d+),\s{0,}(\d+),\s{0,}(\d+)(?:,\s{0,}(\d+\.?\d*))?\)/);return o?{type:"rgba",rgba:[parseInt(o[1],10),parseInt(o[2],10),parseInt(o[3],10),void 0!==o[4]?parseFloat(o[4]):1]}:n}if(e.startsWith("#")){var i=0,c=0,s=0,u=0;switch(e.length){case 4:i=parseInt(e[1]+e[1],16),c=parseInt(e[2]+e[2],16),s=parseInt(e[3]+e[3],16),u=1;break;case 7:i=parseInt(e.slice(1,3),16),c=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16),u=1;break;case 9:i=parseInt(e.slice(1,3),16),c=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16),u=parseInt(e.slice(7,9),16)/255}return{type:"rgba",rgba:[i,c,s,u]}}if(e.startsWith("linear-gradient")){var d=e.match(/linear-gradient\((.*)\)/);if(!d||d.length<2)return n;var f=d[1].split(/,(?![^\(]*\))/);return{type:"linear-gradient",direction:f[0].trim().match(/^\d+deg$|^to /)?f.shift().trim():"to bottom",colorStops:r(f)}}if(e.startsWith("radial-gradient")){var p="circle",y="farthest-corner",g="center",h=e.match(/radial-gradient\((.*)\)/i);if(!h)return n;var b=h[1].split(/,(?![^\(]*\))/),m=0,v=b[m].match(/^\s*(circle|ellipse|closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)?\s*(circle|ellipse|closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)?\s*/i);v&&(p=v[1]||null,y=v[2]||null,(v[1]||v[2])&&m++);var k=b[m].match(/^\s*at\s+([^\s,]+)\s+([^\s,]+)\s*/i);return k&&(g="".concat(k[1]," ").concat(k[2]),m++),{type:"radial-gradient",shape:p,size:y,position:g,colorStops:r(b.slice(m))}}if(e.startsWith("conic-gradient")){var w=e.match(/conic-gradient\((.*)\)/i)[1].split(/,(.+)/);return{type:"conic-gradient",angle:w[0].trim(),colorStops:r(w[1])}}if(e.startsWith("url"))return{type:"url",ref:e};var S=t[e.toLowerCase()];return S?{type:"rgba",rgba:S}:n}function c(e){function r(e){for(var r=e.length,t=[],n=0;n<r;n++){var o=e[n];if("stop"===o.type){var a={type:"stop",color:c(o.color),position:o.position};t.push(a)}}return t}switch(e.type){case"rgba":var t=o(e.rgba,4),n=t[0],a=t[1],i=t[2],l=t[3],s=n/255,u=a/255,d=i/255,f=Math.max(s,u,d),p=f-Math.min(s,u,d),y=0,g=0===f?0:p/f;if(0!==p&&(y=f===s?((u-d)/p+(u<d?6:0))/6:f===u?((d-s)/p+2)/6:((s-u)/p+4)/6),g>.38&&f>.46)return e;var h=y,b=.2*g,m=1-f,v=Math.floor(6*h),k=6*h-v,w=m*(1-b),S=m*(1-k*b),I=m*(1-(1-k)*b),A=o([[m,I,w],[S,m,w],[w,m,I],[w,S,m],[I,w,m],[m,w,S]][v%6].map((function(e){return Math.round(255*e)})),3);return{type:"rgba",rgba:[A[0],A[1],A[2],l]};case"variable":case"url":default:return e;case"linear-gradient":var j=r(e.colorStops);return{type:"linear-gradient",direction:e.direction,colorStops:j};case"radial-gradient":var x=r(e.colorStops);return{type:"radial-gradient",position:e.position,shape:e.shape,size:e.size,colorStops:x};case"conic-gradient":var R=r(e.colorStops);return{type:"conic-gradient",angle:e.angle,colorStops:R}}}function s(e){switch(e.type){case"rgba":var r=o(e.rgba,4),t=r[0],n=r[1],a=r[2],i=r[3];return i<1?"rgba(".concat(t,", ").concat(n,", ").concat(a,", ").concat(i,")"):"rgb(".concat(t,", ").concat(n,", ").concat(a,")");case"variable":case"url":return e.ref;case"linear-gradient":var l=e.colorStops.map((function(e){return"".concat(s(e.color)," ").concat(e.position)})).join(", ");return"linear-gradient(".concat(e.direction,", ").concat(l,")");case"radial-gradient":var c=e.colorStops.map((function(e){return"".concat(s(e.color)," ").concat(e.position)})).join(", ");return"radial-gradient(".concat(e.shape," ").concat(e.size," at ").concat(e.position,", ").concat(c,")");case"conic-gradient":var u=e.colorStops.map((function(e){return"".concat(s(e.color)," ").concat(e.position)})).join(", ");return"conic-gradient(".concat(e.angle,", ").concat(u,")")}}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=p(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(l)throw a}}}}function p(e,r){if(e){if("string"==typeof e)return y(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?y(e,r):void 0}}function y(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function g(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t={};for(var o in e){var a=e[o],i=[].concat(d(r),[o]);if("object"===u(a)&&null!==a)t[o]=g(a,i);else if(n(o,a)){var f=l(a);if(f){var p=c(f);t[o]=s(p)}else t[o]=a}else t[o]=a}return t}function h(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t="",n="";for(var o in e){var a=e[o];if("object"===u(a)&&null!==a&&!Array.isArray(a))if(o.startsWith("@")||Object.values(a).some((function(e){return"object"===u(e)})))t+="".concat(r).concat(o," {\n"),t+=h(a,r+"  "),t+="".concat(r,"}\n");else{for(var i in n+="".concat(r).concat(o," {\n"),a)n+="".concat(r,"  ").concat(i,": ").concat(a[i],";\n");n+="".concat(r,"}\n")}}return n&&(t="".concat(r,"@media (prefers-color-scheme: dark) {\n")+n.replace(/^/gm,r+"  ")+"".concat(r,"}\n")+t),t}var b={initialize:function(){var e=function(){if("styleSheets"in document){var e,r=function e(r,t){var n,o=f(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;switch(a.type){case CSSRule.STYLE_RULE:var i=a.selectorText;t.hasOwnProperty(i)||(t[i]={});var l,c=f(a.style);try{for(c.s();!(l=c.n()).done;){var s=l.value,u=a.style.getPropertyValue(s).trim();u.length>0&&(t[i][s]=u)}}catch(e){c.e(e)}finally{c.f()}break;case CSSRule.MEDIA_RULE:var d="@media ".concat(a.conditionText);t.hasOwnProperty(d)||(t[d]={}),e(a.cssRules,t[d]);break;case CSSRule.KEYFRAMES_RULE:var p="@keyframes ".concat(a.name);t.hasOwnProperty(p)||(t[p]={});var y,g=f(a.cssRules);try{for(g.s();!(y=g.n()).done;){var h=y.value;t[p][h.keyText]={};var b,m=f(h.style);try{for(m.s();!(b=m.n()).done;){var v=b.value,k=h.style.getPropertyValue(v).trim();k.length>0&&(t[p][h.keyText][v]=k)}}catch(e){m.e(e)}finally{m.f()}}}catch(e){g.e(e)}finally{g.f()}break;case CSSRule.IMPORT_RULE:if(a.styleSheet)try{e(a.styleSheet.cssRules,t)}catch(e){console.warn("Cannot access imported stylesheet:",e)}break;default:t["@unknown_".concat(a.type)]=a.cssText}}}catch(e){o.e(e)}finally{o.f()}},t={},n=f(document.styleSheets);try{for(n.s();!(e=n.n()).done;){var o=e.value;try{var a;if(!o.cssRules)continue;var i={};r(o.cssRules,i),t["@".concat(null===(a=o.ownerNode)||void 0===a?void 0:a.id)||0]=i}catch(e){}}}catch(e){n.e(e)}finally{n.f()}return t}}();console.log(e);var r=function(e){var r={};for(var t in e)for(var n in e[t])r.hasOwnProperty(n)||(r[n]={}),r[n]=Object.assign(r[n],e[t][n]);return r}(g(e));console.log(r);var t=h(r),n=document.createElement("style");n.textContent=t,document.head.appendChild(n)}};b.initialize();const m=b;autodarkmode=r.default})();